# RUN: llc -mtriple=aarch64-linux-gnu -run-pass peephole-opt -o - %s 2>&1 | FileCheck %s
# CHECK: %1 = ANDWri {{.*}}
# CHECK-NEXT: %wzr = SUBSWri {{.*}}
---
name:            test01
registers:
  - { id: 0, class: gpr32 }
  - { id: 1, class: gpr32common }
body:             |
  bb.0.entry:
    successors: %bb.2, %bb.1

    %0 = MOVi32imm 1
    %1 = ANDWri killed %1, 15
    %wzr = SUBSWri killed %1, 0, 0, implicit-def %nzcv
    Bcc 9, %bb.2, implicit %nzcv

  bb.1:
    %w0 = MOVi32imm 1
    RET_ReallyLR implicit %w0

  bb.2:
    %w0 = MOVi32imm 0
    RET_ReallyLR implicit %w0
...
