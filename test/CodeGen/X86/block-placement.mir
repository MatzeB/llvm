# RUN: llc -mtriple=x86_64-apple-macosx10.12.0 -O3 -run-pass=block-placement -o - %s | FileCheck %s
... |
  declare void @stub(i32*)
  define void @f() { ret void }
---
---
# CHECK: name:            f
name:            f
alignment:       4
tracksRegLiveness: true
liveins:         
  - { reg: '%rdi' }
  - { reg: '%esi' }

# CHECK: %eax = FAULTING_LOAD_OP %bb.3, 1684, killed %rdi, 1, _, 0, _ :: (load 4)
# CHECK-NEXT: JMP_1 %bb.2
# CHECK: bb.3:
# CHECK:  bb.4:
# CHECK:  bb.2:
body: |
  bb.0:
    successors: %bb.1, %bb.3
    liveins: %esi, %rdi
  
    frame-setup PUSH64r undef %rax, implicit-def %rsp, implicit %rsp
    CFI_INSTRUCTION def_cfa_offset 16
    TEST8ri %sil, 1, implicit-def %eflags, implicit killed %esi
    JE_1 %bb.3, implicit killed %eflags
  
  bb.1:
    successors: %bb.2, %bb.4
    liveins: %rdi
  
    %eax = FAULTING_LOAD_OP %bb.2, 1684, killed %rdi, 1, _, 0, _ :: (load 4)
    JMP_1 %bb.4
  
  bb.4:
    liveins: %rdi, %eax
  
    %rcx = POP64r implicit-def %rsp, implicit %rsp
    RETQ %eax

  bb.2:
    liveins: %rdi
  
    CALL64pcrel32 @stub, csr_64, implicit %rsp, implicit %rdi, implicit-def %rsp
  
  bb.3:
    dead %edi = XOR32rr undef %edi, undef %edi, implicit-def dead %eflags, implicit-def %rdi
    CALL64pcrel32 @stub, csr_64, implicit %rsp, implicit %rdi, implicit-def %rsp
...
