# RUN: llc -mtriple=x86_64-- -run-pass=shrink-wrap2 %s -enable-shrink-wrap2=true -debug-only=shrink-wrap2 -o /dev/null 2>&1 | FileCheck %s
# REQUIRES: asserts
# This is a reduced test case from test/CodeGen/X86/optimize-max-0.ll
---
name:            foo
tracksRegLiveness: true
body:             |
  bb.0:
    successors: %bb.6, %bb.3

    NOOP implicit-def %eflags
    JE_1 %bb.6, implicit killed %eflags
    JMP_1 %bb.3

  bb.3:
    successors: %bb.3, %bb.4

    NOOP implicit-def %eflags
    JNE_1 %bb.3, implicit killed %eflags
    JMP_1 %bb.4

  bb.4:
    successors: %bb.6

    JMP_1 %bb.6

  bb.6:
    successors: %bb.8

    %ebx = MOV32ri 30
    JMP_1 %bb.8

  bb.8:

    RET 0

...
#CHECK-LABEL: foo

#CHECK: BB#3 uses : %RBX
#CHECK: **** Shrink-wrapping results ****
#CHECK-NEXT: BB#3: Saves: %RBX, | Restores: %RBX,
